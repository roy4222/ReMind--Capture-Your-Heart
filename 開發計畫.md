# ReMind - Capture Your Heart 開發計畫

> **專案類型**：期末作業  
> **團隊人數**：5 人  
> **開發時程**：2 週（2024/12/17 - 2024/12/31）  
> **技術棧**：Discord Bot + n8n + 向量資料庫 + LLM

---

## 📋 專題目標

開發一款 Discord 平台上的 AI 情感陪伴機器人「ReMind」，具備以下核心功能：

1. **長期記憶**：透過向量資料庫儲存用戶對話歷史，實現跨對話的語意記憶與檢索
2. **個人化回應**：根據檢索到的歷史對話，提供符合用戶偏好與情境的客製化回覆
3. **低程式碼整合**：使用 n8n 作為自動化中樞，串接 Discord API、LLM 與向量資料庫

---

## 🏗️ 系統架構

```
┌─────────────────────────────────────────────────────────────────┐
│                         Discord Server                          │
│                              │                                   │
│                         用戶訊息                                 │
│                              ▼                                   │
├─────────────────────────────────────────────────────────────────┤
│                      Discord Bot (Webhook)                       │
│                              │                                   │
│                              ▼                                   │
├─────────────────────────────────────────────────────────────────┤
│                         n8n Workflow                             │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐  │
│  │ Webhook  │───▶│ 向量搜尋 │───▶│ LLM 生成 │───▶│ 回覆用戶 │  │
│  │ 接收訊息 │    │ 歷史記憶 │    │ 個人化   │    │ + 存記憶 │  │
│  └──────────┘    └──────────┘    └──────────┘    └──────────┘  │
│                        │                               │        │
│                        ▼                               ▼        │
│               ┌──────────────┐                ┌──────────────┐  │
│               │  向量資料庫   │                │   LLM API    │  │
│               │ (Qdrant/     │                │ (OpenAI/     │  │
│               │  Pinecone)   │                │  Gemini)     │  │
│               └──────────────┘                └──────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 👥 團隊分工

| 角色 | 負責人 | 負責內容 |
|------|--------|----------|
| **Discord Bot 開發** | 成員 A | Bot 設定、Webhook 串接、訊息收發 |
| **n8n 工作流程** | 成員 B | 設計主工作流程、錯誤處理、流程優化 |
| **向量資料庫** | 成員 C | DB 建置、Embedding 處理、語意搜尋 |
| **LLM 整合** | 成員 D | Prompt 設計、API 串接、回應品質調校 |
| **Demo & 文件** | 成員 E | 情境設計、簡報製作、專題報告撰寫 |

> ⚠️ 請根據實際成員專長調整分工

---

## ⏰ 開發時程

### Week 1：基礎建設 & 模組開發（12/17 - 12/22）

| 日期 | 任務 | 負責人 | 產出 |
|------|------|--------|------|
| Day 1-2 (12/17-18) | 環境建置 & 架構確認 | 全員 | 開發環境就緒、架構圖確認 |
| Day 3-4 (12/19-20) | 各模組獨立開發 | 各自負責 | 見下方模組細節 |
| Day 5 (12/21) | 模組整合測試 | 全員 | 基本流程可跑通 |
| Day 6-7 (12/22-23) | Bug 修復 & 優化 | 全員 | 穩定版本 |

#### 模組開發細節（Day 3-4）

| 模組 | 任務 | 驗收標準 |
|------|------|----------|
| Discord Bot | 建立 Bot、設定 Webhook、測試訊息收發 | 可在 Discord 收發訊息 |
| n8n | 建立基礎 workflow、Webhook trigger | Webhook 可接收資料 |
| 向量 DB | 選定服務、建立 Collection、測試寫入/查詢 | 可存取 embedding |
| LLM 串接 | 測試 API、設計基礎 Prompt | API 可正常回應 |

---

### Week 2：整合 & Demo 準備（12/23 - 12/29）

| 日期 | 任務 | 負責人 | 產出 |
|------|------|--------|------|
| Day 1-2 (12/23-24) | 端到端整合 | 成員 A, B, C, D | 完整流程可運作 |
| Day 3 (12/25) | Demo 情境設計 | 成員 E | Demo 劇本 |
| Day 4 (12/26) | 整合測試 + 修 Bug | 全員 | 穩定可 Demo 版本 |
| Day 5 (12/27) | 簡報製作 | 成員 E + 1人 | 投影片初稿 |
| Day 6 (12/28) | 彩排 & 調整 | 全員 | 簡報定稿 |
| Day 7 (12/29) | 緩衝日 | - | 處理突發狀況 |

---

## 🔧 技術選型

### 確定使用
| 類別 | 選擇 | 說明 |
|------|------|------|
| Bot 平台 | Discord | 目標平台 |
| 自動化工具 | n8n (self-hosted 或 cloud) | 低程式碼整合 |
| LLM | OpenAI GPT-4o-mini 或 Gemini 1.5 Flash | 成本考量選較便宜方案 |

### 待確認
| 類別 | 選項 A | 選項 B | 建議 |
|------|--------|--------|------|
| 向量資料庫 | Qdrant Cloud (Free tier) | Pinecone (Free tier) | Qdrant 免費額度較大 |
| Embedding | OpenAI text-embedding-3-small | Gemini embedding | 配合 LLM 選擇 |

---

## 📝 核心功能規格

### 1. 對話記憶存取

**存入記憶**
```
觸發：每次對話結束
流程：
1. 將用戶訊息 + Bot 回覆組成一段對話
2. 透過 Embedding API 轉換為向量
3. 存入向量資料庫（含 metadata：user_id, timestamp）
```

**讀取記憶**
```
觸發：收到用戶新訊息
流程：
1. 將用戶訊息透過 Embedding API 轉換為向量
2. 在向量資料庫中搜尋最相似的 3-5 條歷史對話
3. 將歷史對話作為 context 傳給 LLM
```

### 2. LLM Prompt 設計（初版）

```
你是一個溫暖、善解人意的 AI 陪伴者，名字叫 ReMind。
你的任務是陪伴用戶聊天，並記住他們分享過的事情。

【用戶歷史記憶】
{從向量資料庫檢索的歷史對話}

【當前對話】
用戶：{用戶訊息}

請根據用戶的歷史記憶，給出溫暖、個人化的回應。
如果記憶中有相關資訊，自然地帶入對話中。
回應風格：溫暖、支持、像朋友一樣。
```

---

## ✅ 驗收標準

### 必須完成（P0）
- [ ] Discord Bot 可正常上線
- [ ] 用戶發送訊息後，Bot 能回覆
- [ ] 對話會被存入向量資料庫
- [ ] 新對話會檢索歷史記憶
- [ ] 回覆內容會參考歷史記憶

### 加分項目（P1）
- [ ] 情緒感知：根據用戶情緒調整語氣
- [ ] 記憶摘要：長期記憶會被整理成摘要
- [ ] 多用戶隔離：不同用戶的記憶互相獨立

---

## 📊 Demo 情境設計（草案）

### 情境 1：初次見面
```
用戶：嗨，我是小明，最近壓力很大
Bot：嗨小明！很高興認識你～壓力大的時候找人聊聊是很棒的選擇...
```

### 情境 2：記憶展示
```
（數天後）
用戶：今天心情好多了
Bot：太好了！上次你提到壓力很大，看來最近有好轉了呢...
```

### 情境 3：偏好記憶
```
用戶：我喜歡看動漫
（之後的對話）
用戶：週末不知道要幹嘛
Bot：要不要追個新番呢？你之前說喜歡看動漫...
```

---

## ⚠️ 風險管理

| 風險 | 影響 | 應對策略 |
|------|------|----------|
| 向量 DB 免費額度不夠 | 無法儲存足夠記憶 | 限制每用戶記憶數量、定期清理 |
| LLM API 費用超支 | 無法繼續測試 | 使用便宜模型、限制 Demo 次數 |
| n8n 工作流程太複雜 | 開發時間不足 | 簡化流程、先求有再求好 |
| 整合出問題 | Demo 無法進行 | 預留緩衝日、準備備案 |

---

## 📁 專案結構（建議）

```
n8n_remind_bot/
├── 開發計畫.md          # 本文件
├── docs/
│   ├── 專題報告.md      # 期末報告
│   └── 簡報.pptx        # Demo 簡報
├── n8n/
│   └── workflow.json    # n8n 工作流程匯出
├── prompts/
│   └── system_prompt.md # LLM Prompt 設計
└── demo/
    └── demo_script.md   # Demo 劇本
```

---

## 🚀 立即行動

### 今天（12/17）要完成的事

1. **全員**：確認分工、加入共同開發群組
2. **成員 A**：建立 Discord Bot、取得 Token
3. **成員 B**：架設 n8n（cloud 或 self-hosted）
4. **成員 C**：註冊向量資料庫服務、建立 Collection
5. **成員 D**：取得 LLM API Key、測試 API
6. **成員 E**：開始收集 Demo 素材

---

## 📞 溝通機制

- **每日站會**：每天晚上 9 點線上同步進度（5-10 分鐘）
- **即時溝通**：Discord / LINE 群組
- **文件共享**：GitHub / Google Drive

---

*最後更新：2024/12/17*
